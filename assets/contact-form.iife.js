(function(h,n){"use strict";function N({endpoint:m,restNonce:R,turnstileSiteKey:r,subjects:v,newsletterNotice:E,successMessage:C="Thanks for reaching out! We'll be in touch soon.",successAction:d,onSuccess:f,onError:g,className:p}){const[e,l]=n.useState("idle"),[w,_]=n.useState(""),[a,y]=n.useState({name:"",email:"",subject:"",message:""}),b=n.useRef(null),s=n.useRef(null);n.useEffect(()=>{!r||!b.current||!window.turnstile||s.current||(s.current=window.turnstile.render(b.current,{sitekey:r,theme:"auto",appearance:"interaction-only"}))},[r]);const j=()=>{if(window.turnstile&&s.current)try{window.turnstile.reset(s.current)}catch{}},k=()=>{if(!r||!window.turnstile)return"";try{return window.turnstile.getResponse(s.current??void 0)||""}catch{return""}},i=c=>{const{name:u,value:t}=c.target;y(o=>({...o,[u]:t}))},F=async c=>{if(c.preventDefault(),e==="submitting")return;const u=k();if(r&&!u){l("error"),_("Please complete the security verification.");return}l("submitting"),_("");try{const t=await fetch(m,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":R},body:JSON.stringify({name:a.name,email:a.email,subject:a.subject,message:a.message,turnstile_response:u})}),o=await t.json();if(!t.ok)throw new Error(o.message||"Something went wrong. Please try again.");l("success"),f==null||f()}catch(t){l("error");const o=t instanceof Error?t.message:"Something went wrong. Please try again.";_(o),g==null||g(t instanceof Error?t:new Error(o)),j()}};return e==="success"?React.createElement("div",{className:`ec-contact-form ${p||""}`},React.createElement("div",{className:"ec-contact-form__feedback ec-contact-form__feedback--success"},React.createElement("p",null,C),d&&React.createElement("p",null,React.createElement("a",{href:d.url,className:"ec-contact-form__action"},d.label)))):React.createElement("div",{className:`ec-contact-form ${p||""}`},e==="error"&&w&&React.createElement("div",{className:"ec-contact-form__feedback ec-contact-form__feedback--error"},React.createElement("p",null,w)),React.createElement("form",{onSubmit:F},React.createElement("div",{className:"ec-contact-form__group"},React.createElement("label",{htmlFor:"ec-contact-name",className:"ec-contact-form__label"},"Name"),React.createElement("input",{type:"text",id:"ec-contact-name",name:"name",className:"ec-contact-form__input",value:a.name,onChange:i,required:!0,disabled:e==="submitting"})),React.createElement("div",{className:"ec-contact-form__group"},React.createElement("label",{htmlFor:"ec-contact-email",className:"ec-contact-form__label"},"Email"),React.createElement("input",{type:"email",id:"ec-contact-email",name:"email",className:"ec-contact-form__input",value:a.email,onChange:i,required:!0,disabled:e==="submitting"})),React.createElement("div",{className:"ec-contact-form__group"},React.createElement("label",{htmlFor:"ec-contact-subject",className:"ec-contact-form__label"},"Subject"),React.createElement("select",{id:"ec-contact-subject",name:"subject",className:"ec-contact-form__select",value:a.subject,onChange:i,required:!0,disabled:e==="submitting"},React.createElement("option",{value:""},"Select a subject"),v.map(c=>React.createElement("option",{key:c,value:c},c)))),React.createElement("div",{className:"ec-contact-form__group"},React.createElement("label",{htmlFor:"ec-contact-message",className:"ec-contact-form__label"},"Message"),React.createElement("textarea",{id:"ec-contact-message",name:"message",className:"ec-contact-form__textarea",rows:5,value:a.message,onChange:i,required:!0,disabled:e==="submitting"})),E&&React.createElement("p",{className:"ec-contact-form__notice"},E),r&&React.createElement("div",{className:"ec-contact-form__turnstile",ref:b}),React.createElement("div",{className:"ec-contact-form__group"},React.createElement("button",{type:"submit",className:"ec-contact-form__submit",disabled:e==="submitting"},e==="submitting"?"Sending...":"Send Message"))))}document.addEventListener("DOMContentLoaded",()=>{const m=document.getElementById("ec-contact-form");if(!m)return;if(!window.ecContactConfig){console.error("ContactForm: ecContactConfig not found on window object");return}h.createRoot(m).render(React.createElement(N,{...window.ecContactConfig}))})})(ReactDOM,React);
